ğŸ”§ æ ‘è“æ´¾ä¸²å£è¯Šæ–­å‘½ä»¤é›†
=================================

è¯·åœ¨æ ‘è“æ´¾ä¸Šé€è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

ã€ç¬¬ä¸€æ­¥ã€‘æ£€æŸ¥ä¸²å£è®¾å¤‡
---------------------------------
ls -la /dev/tty*USB* /dev/tty*ACM* /dev/tty*AMA* /dev/tty*S0 2>/dev/null

ã€ç¬¬äºŒæ­¥ã€‘æ£€æŸ¥ USB è®¾å¤‡
---------------------------------
lsusb

ã€ç¬¬ä¸‰æ­¥ã€‘æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ä¸­çš„è®¾å¤‡ä¿¡æ¯
---------------------------------
dmesg | tail -20

ã€ç¬¬å››æ­¥ã€‘æ£€æŸ¥ç”¨æˆ·æƒé™
---------------------------------
groups
id

ã€ç¬¬äº”æ­¥ã€‘è¿›å…¥é¡¹ç›®ç›®å½•
---------------------------------
cd /home/han16/AOAathelta

ã€ç¬¬å…­æ­¥ã€‘è¿è¡Œ Beacon æœåŠ¡æµ‹è¯•ï¼ˆçœ‹æ˜¯å¦èƒ½å¯åŠ¨ï¼‰
---------------------------------
timeout 10 python3 beacon_filter_service.py

è¯´æ˜ï¼š
- timeout 10 è¡¨ç¤ºè¿è¡Œ10ç§’åè‡ªåŠ¨åœæ­¢
- æŸ¥çœ‹æ˜¯å¦æœ‰"ä¸²å£è¿æ¥æˆåŠŸ"æˆ–è€…"æœªæ£€æµ‹åˆ°ä»»ä½•ä¸²å£è®¾å¤‡"çš„æ¶ˆæ¯
- è®°å½•å®Œæ•´çš„é”™è¯¯ä¿¡æ¯

ã€ç¬¬ä¸ƒæ­¥ã€‘æ£€æŸ¥ç‰¹å®šçš„ Python æ¨¡å—
---------------------------------
python3 -c "import serial; print(serial.__version__)"
python3 -c "from workers.aoa_serial_reader import AOASerialReader; print('OK')"
python3 -c "from workers.aoa_kalman_filter import MultiTargetKalmanFilter; print('OK')"

ã€ç¬¬å…«æ­¥ã€‘æ‰‹åŠ¨æµ‹è¯•ä¸²å£è¯»å–
---------------------------------
python3 << 'EOF'
import serial
import os

ports = ['/dev/ttyUSB0', '/dev/ttyUSB1', '/dev/ttyACM0']
for port in ports:
    if os.path.exists(port):
        try:
            print(f"å°è¯•æ‰“å¼€ {port}...")
            ser = serial.Serial(port, 921600, timeout=1)
            print(f"âœ“ {port} å·²æ‰“å¼€")
            # å°è¯•è¯»å–æ•°æ®
            data = ser.readline()
            print(f"  æ”¶åˆ°æ•°æ®: {data}")
            ser.close()
        except Exception as e:
            print(f"âœ— {port} é”™è¯¯: {e}")
    else:
        print(f"âœ— {port} ä¸å­˜åœ¨")
EOF

ã€ç¬¬ä¹æ­¥ã€‘æŸ¥çœ‹æœåŠ¡è¿›ç¨‹çŠ¶æ€
---------------------------------
ps aux | grep beacon_filter
ps aux | grep web_app

ã€ç¬¬åæ­¥ã€‘æ£€æŸ¥ 5001 ç«¯å£çŠ¶æ€
---------------------------------
netstat -tlnp | grep 5001
# æˆ–è€…
ss -tlnp | grep 5001

ã€ç¬¬åä¸€æ­¥ã€‘æŸ¥çœ‹å®Œæ•´çš„è¯Šæ–­æŠ¥å‘Š
---------------------------------
python3 beacon_filter_service_debug.py

=================================
ğŸ“Œ å…³é”®ä¿¡æ¯è¦ç‚¹ï¼š

1. é¦–å…ˆè¦ç¡®è®¤æ˜¯å¦æœ‰ä¸²å£è®¾å¤‡å­˜åœ¨ (dmesg ä¼šæ˜¾ç¤º)
2. æ£€æŸ¥ /dev/ttyUSB0, /dev/ttyUSB1, /dev/ttyACM0 ç­‰
3. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨ dialout ç»„ (groups è¾“å‡ºä¸­åº”åŒ…å« dialout)
4. å¦‚æœæ˜¯æƒé™é—®é¢˜ï¼Œè¿è¡Œ:
   sudo usermod -a -G dialout han16
   ç„¶åé‡æ–°ç™»å½•

5. æŸ¥çœ‹ beacon_filter_service.py å¯åŠ¨æ—¶çš„å®Œæ•´æ—¥å¿—ä¿¡æ¯
   è®°å½•ã€ç¬¬å…­æ­¥ã€‘çš„å…¨éƒ¨è¾“å‡º

=================================
