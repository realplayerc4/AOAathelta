# å¡å°”æ›¼æ»¤æ³¢ç³»ç»Ÿæ¶æ„

## æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Serial Port (UART)                        â”‚
â”‚              /dev/ttyCH343USB0 @ 921600 baud                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  AOA Serial Reader     â”‚  (workers/aoa_serial_reader.py)
        â”‚  - æ¥æ”¶åŸå§‹å­—èŠ‚æ•°æ®    â”‚
        â”‚  - åè®®è§£æ            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                  â”‚
         â–¼                                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ AOA Protocol    â”‚        â”‚  Frame/Position Data     â”‚
    â”‚ Parser          â”‚        â”‚  with Basic Stats        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          AOA Worker Thread                  â”‚
    â”‚         (workers/aoa_worker.py)             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  MultiTargetKalmanFilter            â”‚   â”‚
    â”‚  â”‚  (utils/kalman_filter.py)           â”‚   â”‚
    â”‚  â”‚                                     â”‚   â”‚
    â”‚  â”‚  Per-Tag Filters:                   â”‚   â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
    â”‚  â”‚  â”‚ Filter(Tag 1)â”‚ â”‚ Filter(Tag 2)â”‚ â”‚   â”‚
    â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
    â”‚  â”‚  â”‚ [x,y,vx,vy,â”‚ â”‚ [x,y,vx,vy,â”‚ â”‚   â”‚
    â”‚  â”‚  â”‚  ax,ay]    â”‚ â”‚  ax,ay]    â”‚ â”‚   â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                             â”‚
    â”‚  Inputs:  distance, angle (per tag)        â”‚
    â”‚  Outputs: filtered_x, filtered_y           â”‚
    â”‚           velocity_x, velocity_y           â”‚
    â”‚           confidence                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚
         â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frame Info   â”‚  â”‚ Position Update      â”‚
    â”‚ Signal       â”‚  â”‚ Signal               â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚
           â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       Main Window (UI Layer)             â”‚
    â”‚    (ui/main_window.py)                   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  AOA Data Widget                â”‚   â”‚
    â”‚  â”‚  (ui/widgets/aoa_viewer.py)     â”‚   â”‚
    â”‚  â”‚                                 â”‚   â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
    â”‚  â”‚  â”‚ Data Table               â”‚   â”‚   â”‚
    â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
    â”‚  â”‚  â”‚ Frame ID | Distance      â”‚   â”‚   â”‚
    â”‚  â”‚  â”‚ Angle    | Filtered X/Y  â”‚   â”‚   â”‚
    â”‚  â”‚  â”‚ Confidence | Velocity    â”‚   â”‚   â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
    â”‚  â”‚                                 â”‚   â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
    â”‚  â”‚  â”‚ Statistics Panel         â”‚   â”‚   â”‚
    â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
    â”‚  â”‚  â”‚ Total Frames             â”‚   â”‚   â”‚
    â”‚  â”‚  â”‚ Success/Error Count      â”‚   â”‚   â”‚
    â”‚  â”‚  â”‚ Confidence Avg           â”‚   â”‚   â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ ğŸ”¬ Filter Control Button         â”‚  â”‚
    â”‚  â”‚ Click to toggle enable/disable   â”‚  â”‚
    â”‚  â”‚ Status bar shows current state   â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ»¤æ³¢å™¨å†…éƒ¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        KalmanFilter Instance (Per Target)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  State Vector: x_k = [x, y, vx, vy, ax, ay]^T   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Measurement Input                    â”‚   â”‚
â”‚  â”‚  (distance, angle) in polar coordinates     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚ Polar to Cartesian        â”‚               â”‚
â”‚         â”‚ Conversion                 â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â”‚                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚  Predict Step (F matrix)â”‚                 â”‚
â”‚         â”‚  xâ» = F * x            â”‚                 â”‚
â”‚         â”‚  Pâ» = F*P*F^T + Q      â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                      â”‚                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚  Update Step            â”‚                 â”‚
â”‚         â”‚  y = z - H*xâ»           â”‚  Innovation     â”‚
â”‚         â”‚  K = Pâ»*H^T/(H*Pâ»*H^T+R)â”‚  Kalman Gain   â”‚
â”‚         â”‚  x = xâ» + K*y           â”‚  State Update  â”‚
â”‚         â”‚  P = (I - K*H)*Pâ»       â”‚  Cov Update    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                      â”‚                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚  Confidence Calculation   â”‚               â”‚
â”‚         â”‚  confidence = f(|y|)      â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                      â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚         Filtered Output               â”‚           â”‚
â”‚  â”‚  (filtered_x, filtered_y)             â”‚           â”‚
â”‚  â”‚  (vx, vy, ax, ay)                     â”‚           â”‚
â”‚  â”‚  confidence                           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                     â”‚
â”‚  Optional: Predict Future Position                 â”‚
â”‚  future_x = x + vx*T + 0.5*ax*TÂ²                   â”‚
â”‚  future_y = y + vy*T + 0.5*ay*TÂ²                   â”‚
â”‚  (T = prediction_horizon)                          â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## çŸ©é˜µè¯´æ˜

### çŠ¶æ€è½¬ç§»çŸ©é˜µ F (Constant Acceleration Model)

```
     â”Œ                    â”
     â”‚ 1  0  dt 0  0.5dtÂ² 0   â”‚
     â”‚ 0  1  0  dt 0   0.5dtÂ²â”‚
 F = â”‚ 0  0  1  0  dt  0    â”‚
     â”‚ 0  0  0  1  0   dt   â”‚
     â”‚ 0  0  0  0  1   0    â”‚
     â”‚ 0  0  0  0  0   1    â”‚
     â””                    â”˜

å‚æ•°:
  dt = æ—¶é—´é—´éš” (ç§’)
  ä½ç½®åœ¨ t+dt åçš„é¢„æµ‹:
    x(t+dt) = x(t) + vx*dt + 0.5*ax*dtÂ²
```

### æµ‹é‡çŸ©é˜µ H (Position Only Observed)

```
     â”Œ           â”
 H = â”‚ 1  0  0  0  0  0 â”‚
     â”‚ 0  1  0  0  0  0 â”‚
     â””           â”˜

è¯´æ˜: æˆ‘ä»¬åªèƒ½è§‚æµ‹ä½ç½® (x, y)ï¼Œ
      é€Ÿåº¦å’ŒåŠ é€Ÿåº¦é€šè¿‡å¡å°”æ›¼æ»¤æ³¢æ¨æ–­
```

### å™ªå£°åæ–¹å·®çŸ©é˜µ

```
è¿‡ç¨‹å™ªå£° Q (Process Noise Covariance):
  â”Œ                           â”
  â”‚ q    0    0    0    0    0  â”‚
  â”‚ 0    q    0    0    0    0  â”‚
  â”‚ 0    0    q    0    0    0  â”‚  q = process_noise
  â”‚ 0    0    0    q    0    0  â”‚
  â”‚ 0    0    0    0   2q    0  â”‚  åŠ é€Ÿåº¦å™ªå£°æ›´å¤§
  â”‚ 0    0    0    0    0   2q  â”‚
  â””                           â”˜

æµ‹é‡å™ªå£° R (Measurement Noise Covariance):
  â”Œ           â”
  â”‚ r    0  â”‚  r = measurement_noise
  â”‚ 0    r  â”‚
  â””           â”˜
```

## å¤šç›®æ ‡ç®¡ç†æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MultiTargetKalmanFilter                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Target Registry:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Tag ID â”‚ KalmanFilter Inst â”‚ Last Update     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚   1    â”‚ filter_1          â”‚ 2026-01-08...   â”‚  â”‚
â”‚  â”‚   2    â”‚ filter_2          â”‚ 2026-01-08...   â”‚  â”‚
â”‚  â”‚   5    â”‚ filter_3          â”‚ 2026-01-08...   â”‚  â”‚
â”‚  â”‚  ...   â”‚  ...              â”‚  ...            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚  Operations:                                        â”‚
â”‚  â€¢ filter_measurement(tag_id, distance, angle)      â”‚
â”‚    â†’ Auto create filter if tag_id not exists        â”‚
â”‚    â†’ Apply filtering                                â”‚
â”‚    â†’ Return filtered coordinates                    â”‚
â”‚                                                      â”‚
â”‚  â€¢ remove_lost_targets(current_time)                â”‚
â”‚    â†’ Check all targets                              â”‚
â”‚    â†’ Remove if (now - last_update) > timeout        â”‚
â”‚    â†’ Default timeout = 2.0 seconds                  â”‚
â”‚                                                      â”‚
â”‚  â€¢ get_all_targets()                                â”‚
â”‚    â†’ Return {tag_id: state_dict, ...}              â”‚
â”‚    â†’ state_dict contains position, velocity, etc.   â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI äº¤äº’æµç¨‹

```
User ç‚¹å‡» Filter Button
    â”‚
    â–¼
_on_filter_toggle_clicked()
    â”‚
    â”œâ”€â–º if filter_enabled:
    â”‚    â”œâ”€â–º enable_filter(False)
    â”‚    â”œâ”€â–º Change button text to "å¯ç”¨..."
    â”‚    â”œâ”€â–º Change button color to gray
    â”‚    â””â”€â–º Show "æ»¤æ³¢å·²ç¦ç”¨" message
    â”‚
    â””â”€â–º else:
         â”œâ”€â–º enable_filter(True)
         â”œâ”€â–º Change button text to "ç¦ç”¨..."
         â”œâ”€â–º Change button color to purple
         â””â”€â–º Show "æ»¤æ³¢å·²å¯ç”¨" message

In AOAWorker._on_frame_received():
    â”‚
    â”œâ”€â–º if filter_enabled:
    â”‚    â”œâ”€â–º filter_measurement(...)
    â”‚    â”œâ”€â–º Get filtered_x, filtered_y
    â”‚    â””â”€â–º Add to frame_info dict
    â”‚
    â””â”€â–º else:
         â”œâ”€â–º Convert polar to Cartesian directly
         â””â”€â–º Skip filtering
```

## ä¿¡å·æµ

```
AOA Worker
    â”‚
    â”œâ”€â–º frame_received(dict)
    â”‚   â”œâ”€â”€ frame_id
    â”‚   â”œâ”€â”€ distance_mm
    â”‚   â”œâ”€â”€ angle_degrees
    â”‚   â”œâ”€â”€ filtered_x (if filter_enabled)
    â”‚   â”œâ”€â”€ filtered_y (if filter_enabled)
    â”‚   â”œâ”€â”€ filter_confidence (if filter_enabled)
    â”‚   â””â”€â”€ velocity_x/y (if filter_enabled)
    â”‚       â”‚
    â”‚       â–¼
    â”‚   Main Window
    â”‚       â”‚
    â”‚       â–¼
    â”‚   AOA Data Widget
    â”‚       â”‚
    â”‚       â–¼
    â”‚   Data Table (display)
    â”‚
    â”œâ”€â–º position_updated(dict)
    â”‚   â”œâ”€â”€ tag_id
    â”‚   â”œâ”€â”€ x, y (filtered)
    â”‚   â”œâ”€â”€ distance, angle
    â”‚   â”œâ”€â”€ confidence
    â”‚   â””â”€â”€ timestamp
    â”‚       â”‚
    â”‚       â–¼
    â”‚   Map Viewer Dialog
    â”‚       â”‚
    â”‚       â–¼
    â”‚   Visualization (draw marker)
    â”‚
    â””â”€â–º statistics_updated(dict)
        â”œâ”€â”€ total_frames
        â”œâ”€â”€ error_count
        â”œâ”€â”€ success_count
        â””â”€â”€ error_rate
            â”‚
            â–¼
        Stats Panel (display)
```

## æ—¶åºå›¾

```
Timeline: Incoming measurements with 10Hz data rate

Time    Event                    Filter Action
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
t=0.0   Meas(d=5.0, a=45.0)   â†’ Initialize filter
        frame_received(filtered_x=3.54, filtered_y=3.54)
        confidence=0.5

t=0.1   Meas(d=5.05, a=45.1)  â†’ Predict + Update
        frame_received(filtered_x=3.56, filtered_y=3.55)
        confidence=0.65

t=0.2   Meas(d=5.10, a=45.2)  â†’ Predict + Update
        frame_received(filtered_x=3.59, filtered_y=3.57)
        confidence=0.72

t=0.3   Meas(d=5.08, a=45.0)  â†’ Predict + Update
        frame_received(filtered_x=3.60, filtered_y=3.58)
        confidence=0.78

...

t=1.0   Meas(d=5.30, a=45.5)  â†’ Predict + Update
        frame_received(filtered_x=3.75, filtered_y=3.75)
        confidence=0.87 (ç¨³å®š)
```

## æ€§èƒ½å‰–æ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Single Filter Update Time (CPU Profiling)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚ Measurement Input Conversion:    0.01 ms       â”‚
â”‚ Predict Step:                    0.05 ms       â”‚
â”‚   - F matrix mult              0.02 ms         â”‚
â”‚   - Covariance update          0.03 ms         â”‚
â”‚                                                â”‚
â”‚ Update Step:                     0.15 ms       â”‚
â”‚   - Innovation calc            0.03 ms         â”‚
â”‚   - S matrix inversion         0.08 ms         â”‚
â”‚   - Kalman gain calc           0.02 ms         â”‚
â”‚   - State update               0.02 ms         â”‚
â”‚                                                â”‚
â”‚ Confidence Update:               0.03 ms       â”‚
â”‚                                                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Total per measurement:           0.24 ms       â”‚
â”‚                                                â”‚
â”‚ For 100 targets:                 24 ms         â”‚
â”‚   (still < 50ms target)                        â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ¶æ„å›¾æ›´æ–°**: 2026-01-08
